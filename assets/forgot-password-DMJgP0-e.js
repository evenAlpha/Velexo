import{w as u}from"./with-props-BQZFb7-w.js";import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{c as h}from"./client-B0M0j1kj.js";import{B as p}from"./button-D9Y7BBUR.js";import{C as l,b as c,c as d,d as m,a as x}from"./card-3ARTUL8o.js";import{I as f}from"./input-CYFwwULt.js";import{L as j}from"./label-C1ccO2ja.js";import{x as w,q as g,y,z as N,A as C}from"./chunk-KNED5TY2-DvhD41lM.js";import"./utils-DjqsqOe8.js";import"./index-DQUGhA2v.js";import"./index-xxwHCPOv.js";const S=async({request:o})=>{const a=(await o.formData()).get("email"),i=h(),t=new URL(o.url).origin,{error:s}=await i.auth.resetPasswordForEmail(a,{redirectTo:`${t}/auth/confirm?next=/update-password`});return s?w({error:s instanceof Error?s.message:"An error occurred",data:{email:a}}):g("/forgot-password?success")},T=u(function(){var n;const r=y();let[a]=N();const i=!!a.has("success"),t=(n=r.data)==null?void 0:n.error,s=r.state==="submitting";return e.jsx("div",{className:"flex min-h-svh w-full items-center justify-center p-6 md:p-10",children:e.jsx("div",{className:"w-full max-w-sm",children:e.jsx("div",{className:"flex flex-col gap-6",children:i?e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(d,{className:"text-2xl",children:"Check Your Email"}),e.jsx(m,{children:"Password reset instructions sent"})]}),e.jsx(x,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you registered using your email and password, you will receive a password reset email."})})]}):e.jsxs(l,{children:[e.jsxs(c,{children:[e.jsx(d,{className:"text-2xl",children:"Reset Your Password"}),e.jsx(m,{children:"Type in your email and we'll send you a link to reset your password"})]}),e.jsx(x,{children:e.jsxs(r.Form,{method:"post",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"email",children:"Email"}),e.jsx(f,{id:"email",name:"email",type:"email",placeholder:"m@example.com",required:!0})]}),t&&e.jsx("p",{className:"text-sm text-red-500",children:t}),e.jsx(p,{type:"submit",className:"w-full",disabled:s,children:s?"Sending...":"Send reset email"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",e.jsx(C,{to:"/login",className:"underline underline-offset-4",children:"Login"})]})]})})]})})})})});export{S as clientAction,T as default};
