import{w as j}from"./with-props-BmnBrIYl.js";import{j as e}from"./jsx-runtime-BjG_zV1W.js";import{c as g}from"./client-BMejrtNq.js";import{B as w}from"./button-CN2Ei1bR.js";import{C as m,b as p,c as x,d as u,a as h}from"./card-aNYpyC57.js";import{I as o}from"./input-BtX7ZIBT.js";import{L as c}from"./label-D1DPPQ8C.js";import{q as N,y as v,z as y,A as C}from"./chunk-KNED5TY2-DK4LrZ4V.js";import"./utils-DjqsqOe8.js";import"./index-D1l7H5IR.js";import"./index-DezlXQ_q.js";const T=async({request:i})=>{const a=g(),n=new URL(i.url).origin,s=await i.formData(),t=s.get("email"),r=s.get("password"),f=s.get("repeat-password");if(!r)return{error:"Password is required"};if(r!==f)return{error:"Passwords do not match"};const{error:d}=await a.auth.signUp({email:t,password:r,options:{emailRedirectTo:`${n}/protected`}});return d?{error:d.message}:N("/sign-up?success")},B=j(function(){var r;const a=v();let[l]=y();const n=!!l.has("success"),s=(r=a.data)==null?void 0:r.error,t=a.state==="submitting";return e.jsx("div",{className:"flex min-h-svh w-full items-center justify-center p-6 md:p-10",children:e.jsx("div",{className:"w-full max-w-sm",children:e.jsx("div",{className:"flex flex-col gap-6",children:n?e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(x,{className:"text-2xl",children:"Thank you for signing up!"}),e.jsx(u,{children:"Check your email to confirm"})]}),e.jsx(h,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"You've successfully signed up. Please check your email to confirm your account before signing in."})})]}):e.jsxs(m,{children:[e.jsxs(p,{children:[e.jsx(x,{className:"text-2xl",children:"Sign up"}),e.jsx(u,{children:"Create a new account"})]}),e.jsx(h,{children:e.jsxs(a.Form,{method:"post",children:[e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(o,{id:"email",name:"email",type:"email",placeholder:"m@example.com",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(c,{htmlFor:"password",children:"Password"})}),e.jsx(o,{id:"password",name:"password",type:"password",required:!0})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(c,{htmlFor:"repeat-password",children:"Repeat Password"})}),e.jsx(o,{id:"repeat-password",name:"repeat-password",type:"password",required:!0})]}),s&&e.jsx("p",{className:"text-sm text-red-500",children:s}),e.jsx(w,{type:"submit",className:"w-full",disabled:t,children:t?"Creating an account...":"Sign up"})]}),e.jsxs("div",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",e.jsx(C,{to:"/login",className:"underline underline-offset-4",children:"Login"})]})]})})]})})})})});export{T as clientAction,B as default};
